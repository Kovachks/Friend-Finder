<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Friend Finder</title>

		<!-- Reset CSS Sheet -->
		<link rel="stylesheet" href="reset.css">

		<!-- Bootstrap sheet for Modal -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">	
		
		<!-- Normal Style Sheet -->
		<link rel="stylesheet" href="style.css">

		<!-- Link to Jquery -->
		<script src="https://code.jquery.com/jquery-3.2.1.js"
  				integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
  				crossorigin="anonymous">
  		</script>

  		<!-- Link to Bootstrap Scripts -->
  		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	</head>
	<body>

		<!-- Modal -->
		<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		  	<div class="modal-dialog" role="document">
		    	<div class="modal-content">
		      		<div class="modal-header">
		        		<h5 class="modal-title" id="exampleModalLabel">Best Match</h5>
		        		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          			<span aria-hidden="true">&times;</span>
		        		</button>
		      		</div>
		      		<div class="modal-body">
		        		<h2 id="closeName"></h2>
		        		<img id="closeImage" src="" alt="" style="width:250px; height:250px">
		      		</div>
		      		<div class="modal-footer">
		        		<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
		      		</div>
		    	</div>
		  	</div>
		</div>

		<!-- Header -->
		<div id="header">
			<div id="headerTitle"><p id="headerText">Friend Finder</p></div>
		</div>

		<!-- Nav Bar -->
		<div id="nav">
			<ul id="buttonDiv">
				<li class="navButton" id="leftNavButton"><a href="./home.html" class="navLink">Home</a></li>
				<li class="navButton" id="centerNavButton"><a href="./api/friends" class="navLink">API Friends List</a></li>
				<li class="navButton" id="rightNavButton"><a href="https://github.com/Kovachks/Friend-Finder" class="navLink" target="_blank">Github Repo</a></li>
			</ul>
		</div>

		<!-- Container Containing all of the questions -->
		<div id="textContent">
			<div id="textContainer">
				<h2 class="surveyHeader">Survey Questions</h2>
				<h3 class="aboutText">About You</h3>
				<h5 class="questionText">Name (Required)</h5>
				<input type="text" id="name">
				<br>
				<br>
				<h5 class="questionText">Link to Photo Image (Required)</h5>
				<input type="text" id="userPhoto">
				<br>
				<br>
				<h3 class="questionHeader">Question 1</h3>
				<h5 class="questionText">Your mind is always buzzing with unexplored ideas and plans.</h5>
				<form action="">
					<input type="radio" name='question1' value=1>1 
					<input type="radio" name='question1' value=2>2
					<input type="radio" name='question1' value=3>3
					<input type="radio" name='question1' value=4>4
					<input type="radio" name='question1' value=5>5
					<p>1 - Strongly Disagree; 5 - Strong Agree</p>
				</form>
				<br>
				<h3 class="questionHeader">Question 2</h3>
				<h5 class="questionText">Generally speaking, you rely more on your experience than your imagination.</h5>
				<form action="">
					<input type="radio" name='question2' value=1>1
					<input type="radio" name='question2' value=2>2
					<input type="radio" name='question2' value=3>3
					<input type="radio" name='question2' value=4>4
					<input type="radio" name='question2' value=5>5
					<p>1 - Strongly Disagree; 5 - Strong Agree</p>					
				</form>
				<br>
				<h3 class="questionHeader">Question 3</h3>
				<h5 class="questionText">You find it easy to stay relaxed and focused even when there is some pressure.</h5>
				<form action="">
					<input type="radio" name='question3' value=1>1
					<input type="radio" name='question3' value=2>2
					<input type="radio" name='question3' value=3>3
					<input type="radio" name='question3' value=4>4
					<input type="radio" name='question3' value=5>5
					<p>1 - Strongly Disagree; 5 - Strong Agree</p>					
				</form>
				<br>	
				<h3 class="questionHeader">Question 4</h3>
				<h5 class="questionText">You rarely do someting just out of sheer curiosity</h5>
				<form action="">
					<input type="radio" name='question4' value=1>1
					<input type="radio" name='question4' value=2>2
					<input type="radio" name='question4' value=3>3
					<input type="radio" name='question4' value=4>4
					<input type="radio" name='question4' value=5>5
					<p>1 - Strongly Disagree; 5 - Strong Agree</p>					
				</form>
				<br>	
				<h3 class="questionHeader">Question 5</h3>
				<h5 class="questionText">People can rarely upset you.</h5>
				<form action="">
					<input type="radio" name='question5' value=1>1
					<input type="radio" name='question5' value=2>2
					<input type="radio" name='question5' value=3>3
					<input type="radio" name='question5' value=4>4
					<input type="radio" name='question5' value=5>5
					<p>1 - Strongly Disagree; 5 - Strong Agree</p>					
				</form>
				<br>	
				<h3 class="questionHeader">Question 6</h3>
				<h5 class="questionText">It is often difficult for you to relate to other people's feelings.</h5>
				<form action="">
					<input type="radio" name='question6' value=1>1
					<input type="radio" name='question6' value=2>2
					<input type="radio" name='question6' value=3>3
					<input type="radio" name='question6' value=4>4
					<input type="radio" name='question6' value=5>5
					<p>1 - Strongly Disagree; 5 - Strong Agree</p>					
				</form>
				<br>	
				<h3 class="questionHeader">Question 7</h3>
				<h5 class="questionText">In a discussion, truth should be more important than people's sensitivities.</h5>
				<form action="">
					<input type="radio" name='question7' value=1>1
					<input type="radio" name='question7' value=2>2
					<input type="radio" name='question7' value=3>3
					<input type="radio" name='question7' value=4>4
					<input type="radio" name='question7' value=5>5
					<p>1 - Strongly Disagree; 5 - Strong Agree</p>					
				</form>
				<br>	
				<h3 class="questionHeader">Question 8</h3>
				<h5 class="questionText">You think that everyone's views should be respected regardless of whether they are supported by facts or not.</h5>
				<form action="">
					<input type="radio" name='question8' value=1>1
					<input type="radio" name='question8' value=2>2
					<input type="radio" name='question8' value=3>3
					<input type="radio" name='question8' value=4>4
					<input type="radio" name='question8' value=5>5
					<p>1 - Strongly Disagree; 5 - Strong Agree</p>					
				</form>	
				<br>
				<h3 class="questionHeader">Question 9</h3>
				<h5 class="questionText">You rarely get carried away by fantasies and ideas.</h5>
				<form action="">
					<input type="radio" name='question9' value=1>1
					<input type="radio" name='question9' value=2>2
					<input type="radio" name='question9' value=3>3
					<input type="radio" name='question9' value=4>4
					<input type="radio" name='question9' value=5>5
					<p>1 - Strongly Disagree; 5 - Strong Agree</p>					
				</form>	
				<br>
				<h3 class="questionHeader">Question 10</h3>
				<h5 class="questionText">You feel more energetic after spending time with a group of people.</h5>
				<form action="">
					<input type="radio" name='question10' value=1>1
					<input type="radio" name='question10' value=2>2
					<input type="radio" name='question10' value=3>3
					<input type="radio" name='question10' value=4>4
					<input type="radio" name='question10' value=5>5
					<p>1 - Strongly Disagree; 5 - Strong Agree</p>					
				</form>
				<br>

				<!-- Submit Button -->
				<form action="">
					<button type="button" class="btn btn-primary" data-target="#exampleModal" id="submitButton">Submit Survey</button>
				</form>
			</div>				
		</div>

		<!-- Script for submitting information to API -->
		<script type="text/javascript">

			// On click handler for submit button
			$("#submitButton").on("click", function(event) {
				event.preventDefault();
				
				// Variable for storing the users data
				var newUser = {
					name: $("#name").val().trim(),
					photo: $("#userPhoto").val().trim(),
					score: []
				}
				// Grabbing every checked radio button value and pushing said value to the score array
				$("input:radio").each(function(){
					if ($(this).is(':checked') === true) {
					newUser.score.push(($(this).val()))
					}
				})

				// Posting the users data to api/friends
				$.post("/api/friends", newUser)

				//After post is complete continue to Modal update
				.done(function(data) {

					//If there is no data console log "no data"
					if (data === false) {
						console.log("no data")
					}

					//Updating the name section of the modal with the closest matched users name
					$("#closeName").text(data[0]);

					//Updating the image section of the modal with the closest matched users image
					$("#closeImage").attr("src", data[1]);

					//Toggling the modal in order to show the closest users information
					$("#exampleModal").modal('toggle')	
				})
			})
		</script>
	</body>
</html>